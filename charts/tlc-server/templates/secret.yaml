{{- if not .Values.tlc.jwt.existingSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "tlc-server.fullname" . }}-secrets
  labels:
    {{- include "tlc-server.labels" . | nindent 4 }}
  annotations:
    "helm.sh/resource-policy": keep
type: Opaque
data:
  # Generated secrets - override with existingSecret for production
  jwt-secret: {{ randAlphaNum 64 | b64enc | quote }}
  webhook-secret: {{ randAlphaNum 32 | b64enc | quote }}
  {{- if .Values.tlc.slack.webhookUrl }}
  slack-webhook-url: {{ .Values.tlc.slack.webhookUrl | b64enc | quote }}
  {{- end }}
{{- end }}
